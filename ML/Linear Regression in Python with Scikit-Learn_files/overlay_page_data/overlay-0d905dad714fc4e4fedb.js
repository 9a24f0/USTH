(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[32],{193:function(t,e,i){var r,n;function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}!function(){"use strict";r=[i(2),i(83)],void 0===(n=function(t,e){return t((function(){this.defaultAttrs({bundleCartSelector:".js-bundle-cart",bundleToolTipSelector:".js-bundle-tool-tip",buyerMenuSelector:".js-buyer-menu",externalLinkSelector:"a:not(.js-logout-link):not(.js-preview-link):not(.js-creator-profile-tabs a)[href]",footerSelector:".js-footer",loginSelector:".js-login",loginCloseModalSelector:".js-close-modal-trigger",productContainerSelector:".js-product-row",productDisplaySelector:".js-product-display",productListSelector:".js-bundled-product-list",productSelector:".js-product",bundleHeightSpacing:65,bundleWidthSpacing:15,bundleMenuWidth:85,bundleMenuHeight:50,footerHeight:120,minLoginModalWidth:360,productParams:{},validDurationParams:["monthly","quarterly","biannually","yearly"],validOtherParams:["permalink","offerCodeName","locale","wanted","email","gift","recommended_by","quantity","price","variant","tier","duration","url_parameters"]}),this.addTargetsToLinks=function(){this.select("externalLinkSelector").attr("target","_blank")},this.cancelCheckout=function(){this.attr.checkingOut=!1,$("body").removeClass("checking-out showing-bundle"),setTimeout(function(){this.shrinkToBundleOpen()}.bind(this),300)},this.clickListener=function(t){var e=$(t.target||t.srcElement),i=["buy-form-main","bundle-container","product-row","js-login","gr-login"];if(!this.attr.checkingOut||e.hasClass("js-overlay-blocker")){for(var r=0;r<i.length;r++){var n=i[r];if(e.hasClass(n)||e.parents("."+n).length>0)return}this.attr.completedPurchase?this.minimize():this.shrinkToBundleOpen()}},this.completePurchase=function(t,e){this.attr.checkingOut=!1,this.attr.completedPurchase=!0},this.notifyParentPageOfPurchase=function(t,e){e.success&&this.sendMessageToParent(s(s({},e),{},{post_message_name:"sale"}))},this.getPersistentBundle=function(){this.trigger("uiNeedsToGetPersistentBundle")},this.getProduct=function(t){this.attr.productParams={},this.attr.userGoogleAnalyticsClientId=t.googleAnalyticsClientId;for(var e=0;e<this.attr.validParams.length;e++){var i=this.attr.validParams[e],r=t[i];r&&"false"!==r.toString().toLowerCase()&&(this.attr.productParams[i]=r)}this.setDuration(),this.trigger(document,"uiNeedsAProduct",this.attr.productParams)},this.gotMessage=function(t){var e={};if(t.data)try{e=JSON.parse(t.data)}catch(i){}e.overlayMethod&&this[e.overlayMethod]&&this[e.overlayMethod](e.overlayArgs)},this.keyListener=function(t){27===t.keyCode&&(t.stopPropagation(),this.minimize())},this.maximize=function(t){this.addObserverToResizeOverlay(),this.resizeOverlayOnDescriptionContentLoad(),this.refreshPreview(),$("body").removeClass("gumroad-minimized"),this.select("productContainerSelector").addClass("showing"),this.trigger("uiNeedsToShowProductCountInCircle"),setTimeout(function(){this.resizeOverlay()}.bind(this),300),this.sendMessageToParent({parentMethod:"maximizeIframe",parentArgs:{width:$("body").width()+"px",height:$("body").height()+this.attr.footerHeight+"px"}})},this.minimize=function(t){var e={parentMethod:"minimizeIframe"};if(t&&t.minimizeDimensions)e.parentArgs=t.minimizeDimensions;else if(this.attr.checkingOut)return;$("body").addClass("gumroad-minimized"),this.select("productContainerSelector").addClass("not-showing"),this.trigger("uiNeedsToPauseVideo"),setTimeout(function(){this.sendMessageToParent(e)}.bind(this),300)},this.prepareProduct=function(t,i){this.removeProduct(),this.select("productDisplaySelector").html(i.html),this.select("productSelector").addClass("relative popped"),e.attachTo(this.attr.productContainerSelector,{incrementViewCountOnInit:!0,isMobile:this.attr.isMobile,isMultiBuyEnabled:!this.attr.singleProductMode,onUserProfile:!this.attr.singleProductMode,overlayOfferCode:this.attr.productParams.offerCodeName,overlayQuantity:this.attr.productParams.quantity,overlayPrice:this.attr.productParams.price,overlayVariant:this.attr.productParams.variant,overlayTier:this.attr.productParams.tier,overlayDuration:this.attr.productParams.duration,overlayRecommendedBy:this.attr.productParams.recommended_by,overlayUrlParams:this.attr.productParams.url_parameters,permalink:this.attr.productParams.permalink,userInfoToAdd:this.attr.user,wantThis:this.attr.productParams.wanted,isOverlay:!0,userGoogleAnalyticsClientId:this.attr.userGoogleAnalyticsClientId}),this.showProduct()},this.productsInBundle=function(){var t=[];return this.select("productListSelector").find("li").each((function(e,i){t.push($(i).data("unique-permalink"))})),t},this.redirect=function(t,e){this.sendMessageToParent({parentMethod:"redirect",parentArgs:e.url})},this.refreshPreview=function(){this.trigger(document,"showPreview")},this.removeProduct=function(){this.attr.observer&&(this.attr.observer.disconnect(),this.attr.observer=null),e.teardownAll(),this.select("productDisplaySelector").empty()},this.sendMessageToParent=function(t){this.overlayParentDomain&&("object"===typeof t&&(t=JSON.stringify(t)),window.parent.postMessage(t,this.overlayParentDomain))},this.setOverlayParentDomain=function(t){this.overlayParentDomain=t,this.sendMessageToParent({parentMethod:"handshake"})},this.setDuration=function(){for(var t=0;t<this.attr.validDurationParams.length;t++){var e=this.attr.validDurationParams[t];if(this.attr.productParams[e]&&this.attr.validDurationParams.indexOf(this.attr.productParams.duration)<0){this.attr.productParams.duration=e;break}}},this.showPaymentFormIfWanted=function(){this.attr.productParams.wanted&&this.trigger("uiShowOverlayCreditCardForm")},this.showProduct=function(){this.trigger("uiTriggerECommerceView"),this.select("footerSelector").toggle(!this.select("productContainerSelector").data("custom-web-branding")),this.attr.productParams.wanted?this.trigger("uiShowPaymentForm"):this.maximize()},this.startCheckout=function(){"true"===$('meta[property="gr:paypal:pay_with_paypal_enabled"]').attr("value")&&this.trigger("uiNeedsBraintreeClientTokenFetched",{isOverlay:this.attr.isOverlay,isMultiBuyEnabled:this.attr.onMultiOverlay||this.attr.isMultiBuyEnabled}),this.attr.checkingOut=!0,$("body").addClass("showing-bundle checking-out"),setTimeout(function(){this.shrinkToBundleOpen()}.bind(this),300)},this.resizeOverlay=function(t,e){var i=(e?e.height:$("body").height())+this.attr.footerHeight;this.sendMessageToParent({parentMethod:"resizeIframe",parentArgs:{width:$("body").width()+"px",height:i+"px"}})},this.addObserverToResizeOverlay=function(){if(this.attr.observer)return!1;var t=this;this.attr.observer=new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.length>0&&Array.prototype.forEach.call(e.addedNodes,(function(e){e.className&&e.className.indexOf("-preview-container")>-1&&(e.className.indexOf("image-preview-container")>-1?$("img.preview")[0].complete?setTimeout((function(){t.resizeOverlay()}),50):($("img.preview").load((function(){t.resizeOverlay()})),$("img.preview").error((function(){t.resizeOverlay()}))):setTimeout((function(){t.resizeOverlay()}),300))}))}))})),this.attr.observer.observe($(".js-preview-container")[0],{childList:!0,subtree:!0})},this.resizeOverlayOnDescriptionContentLoad=function(){var t=this;$(".medium-insert-images img").load((function(){t.resizeOverlay()}))},this.shrinkToBundleOpen=function(){var t=null;if(this.productsInBundle().length>0){var e=this.select("bundleToolTipSelector");t={minimizeDimensions:{width:parseInt(e.outerWidth())+this.attr.bundleWidthSpacing+"px",height:parseInt(e.outerHeight())+this.attr.bundleHeightSpacing+"px"}}}this.minimize(t)},this.shrinkOverlay=function(t,e){this.sendMessageToParent({parentMethod:"minimizeIframe",parentArgs:{width:t+"px",height:e+"px"}})},this.shrinkToLoginModal=function(){this.shrinkOverlay(this.attr.minLoginModalWidth,$("body").height())},this.shrinkToBundleClose=function(){this.shrinkOverlay(this.attr.bundleMenuWidth,this.attr.bundleMenuHeight)},this.shrinkToBuyerMenuOpen=function(){var t=this.select("buyerMenuSelector");this.shrinkOverlay(Math.max(this.attr.bundleMenuWidth,t.outerWidth())+this.attr.bundleWidthSpacing,this.attr.bundleHeightSpacing+t.outerHeight())},this.after("initialize",(function(){this.attr.validParams=this.attr.validDurationParams.concat(this.attr.validOtherParams),this.attr.singleProductMode=$(".js-product-display").data("single-product-mode"),$("body").addClass("gumroad-minimized"),window.addEventListener?window.addEventListener("message",function(t){this.gotMessage(t)}.bind(this),!1):window.attachEvent&&window.attachEvent("onmessage",function(t){this.gotMessage(t)}.bind(this),!1),this.addTargetsToLinks(),this.trigger(document,"uiSetOverlayPageShareUrl",{url:this.select("productDisplaySelector").data("overlay-share-url")}),this.on(document,"dataGotAProduct",this.prepareProduct),this.on(document,"uiBundledProductPaymentFailed",this.completePurchase),this.on(document,"uiBundledProductPaymentCompleted",this.completePurchase),this.on(document,"uiBundledProductPaymentCompleted",this.notifyParentPageOfPurchase),this.on(document,"dataPurchaseSuccessful",this.notifyParentPageOfPurchase),this.on("click",{loginCloseModalSelector:this.shrinkToBuyerMenuOpen}),this.on(document,"uiCanShowPaymentForm",this.showPaymentFormIfWanted),this.on(document,"uiCannotShowPaymentForm",this.maximize),this.on(document,"uiNeedsToCancelBundleCheckout",this.cancelCheckout),this.on(document,"uiNeedsToStartBundleCheckout",this.startCheckout),this.on(document,"uiNeedsToRedirectOverlayFromReceipt",this.redirect),this.on(document,"uiShouldResizeOverlay",this.resizeOverlay),this.on(document,"uiShowLoginModal",this.shrinkToLoginModal),this.on(document,"uiNeedsToHideProductOverlay",this.shrinkToBundleOpen),this.on(document,"uiNeedsToShrinkToBundleClose",this.shrinkToBundleClose),this.on(document,"uiNeedsToShrinkToBundleOpen",this.shrinkToBundleOpen),this.on(document,"uiNeedsToShrinkToBuyerMenuOpen",this.shrinkToBuyerMenuOpen),this.on(document,"keydown",this.keyListener),this.on(document,"click",this.clickListener)}))}))}.apply(e,r))||(t.exports=n)}()},608:function(t,e,i){var r,n;!function(){"use strict";r=[i(13),i(183),i(106),i(193),i(194),i(105),i(128),i(129),i(104),i(179),i(80),i(108)],void 0===(n=function(t,e,i,r,n,o,s,a,h,d,u,c){var l=a.default,m=h.default,p=u.default,g=c.default;t.initialize(),$(".js-product-display").data("single-product-mode")||e.attachTo(".js-bundle-button",{onMultiOverlay:!0}),i.attachTo(".js-login"),r.attachTo(document),n.attachTo(document),o.attachTo(document),s.attachTo(document),l.attachTo(document),m.attachTo(document),d.attachTo(document),p.attachTo(document),g.attachTo(document)}.apply(e,r))||(t.exports=n)}()}},[[608,0,1]]]);